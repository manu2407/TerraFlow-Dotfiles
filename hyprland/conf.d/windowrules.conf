# ╔══════════════════════════════════════════════════════════════════════════╗
# ║                     WINDOW RULES - TerraFlow Dotfiles                     ║
# ║                          Hyprland v0.46+ Syntax                           ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                           FLOATING DIALOGS                                │
# └──────────────────────────────────────────────────────────────────────────┘

# Float certain windows (Hyprland v0.46+ syntax requires values for flags)
windowrule = float 1, match:class pavucontrol
windowrule = float 1, match:class blueman-manager
windowrule = float 1, match:class nm-connection-editor
windowrule = float 1, match:class nm-applet
windowrule = float 1, match:class file-roller
windowrule = float 1, match:class gnome-calculator
windowrule = float 1, match:class gnome-system-monitor

# File dialogs
windowrule = float 1, match:title Open File
windowrule = float 1, match:title Save File
windowrule = float 1, match:title Open Folder
windowrule = float 1, match:title Save As
windowrule = float 1, match:title Confirm

# Authentication
windowrule = float 1, match:class polkit-gnome-authentication-agent-1
windowrule = float 1, match:class pinentry.*
windowrule = stay_focused 1, match:class pinentry.*

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                        PICTURE-IN-PICTURE                                 │
# └──────────────────────────────────────────────────────────────────────────┘

windowrule = float 1, match:title Picture-in-Picture
windowrule = float 1, match:title Picture in picture
windowrule = pin 1, match:title Picture-in-Picture
windowrule = pin 1, match:title Picture in picture
windowrule = size 480 270, match:title Picture-in-Picture
windowrule = move 100%-490 100%-280, match:title Picture-in-Picture

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                           OPACITY RULES                                   │
# └──────────────────────────────────────────────────────────────────────────┘

# Terminal transparency (active inactive fullscreen)
windowrule = opacity 0.92 override 0.85 override 1.0 override, match:class ghostty
windowrule = opacity 0.92 override 0.85 override 1.0 override, match:class kitty
windowrule = opacity 0.92 override 0.85 override 1.0 override, match:class Alacritty

# Code editors - slight transparency
windowrule = opacity 0.95 override 0.90 override 1.0 override, match:class code-url-handler
windowrule = opacity 0.95 override 0.90 override 1.0 override, match:class Code
windowrule = opacity 0.95 override 0.90 override 1.0 override, match:class obsidian

# File managers
windowrule = opacity 0.92 override 0.85 override 1.0 override, match:class org.kde.dolphin
windowrule = opacity 0.92 override 0.85 override 1.0 override, match:class thunar
windowrule = opacity 0.92 override 0.85 override 1.0 override, match:class yazi

# Discord / Communication
windowrule = opacity 0.95 override 0.90 override 1.0 override, match:class discord
windowrule = opacity 0.95 override 0.90 override 1.0 override, match:class WebCord
windowrule = opacity 0.95 override 0.90 override 1.0 override, match:class Slack

# Spotify - slightly more opaque
windowrule = opacity 0.95 override 0.92 override 1.0 override, match:class Spotify

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                         BLUR EXCEPTIONS                                   │
# └──────────────────────────────────────────────────────────────────────────┘

# Disable blur for video players (performance)
windowrule = no_blur 1, match:class mpv
windowrule = no_blur 1, match:class vlc
windowrule = no_blur 1, match:class com.github.rafostar.Clapper

# Disable blur for games
windowrule = no_blur 1, match:class steam_app_.*
windowrule = no_blur 1, match:class gamescope

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                        FULLSCREEN HANDLING                                │
# └──────────────────────────────────────────────────────────────────────────┘

# Games - disable decorations and hyprland features
windowrule = fullscreen 1, match:class steam_app_.*
windowrule = no_shadow 1, match:fullscreen 1
windowrule = border_color rgb(fbf1c7) rgb(ebdbb2), match:fullscreen 1

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                       WORKSPACE ASSIGNMENTS                               │
# └──────────────────────────────────────────────────────────────────────────┘

# Browser → Workspace 1
# windowrule = workspace 1, match:class zen-browser
# windowrule = workspace 1, match:class firefox
# windowrule = workspace 1, match:class chromium

# Code → Workspace 2
# windowrule = workspace 2 silent, match:class code-url-handler
# windowrule = workspace 2 silent, match:class obsidian

# Communication → Workspace 4
# windowrule = workspace 4 silent, match:class discord
# windowrule = workspace 4 silent, match:class Slack

# Music → Workspace 5
# windowrule = workspace 5 silent, match:class Spotify

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                         SPECIAL WINDOWS                                   │
# └──────────────────────────────────────────────────────────────────────────┘

# Scratchpad terminal
windowrule = float 1, match:title scratchpad
windowrule = size 80% 70%, match:title scratchpad
windowrule = center 1, match:title scratchpad

# Dropdown terminal
windowrule = float 1, match:title dropdown
windowrule = size 100% 40%, match:title dropdown
windowrule = move 0 0, match:title dropdown
windowrule = animation slide, match:title dropdown

# Terra Store
windowrule = float 1, match:title Terra Store
windowrule = size 1000 700, match:title Terra Store
windowrule = center 1, match:title Terra Store

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                         XWAYLAND FIXES                                    │
# └──────────────────────────────────────────────────────────────────────────┘

# Force no blur on XWayland (can cause issues)
windowrule = no_blur 1, match:xwayland 1

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                          LAYER RULES                                      │
# └──────────────────────────────────────────────────────────────────────────┘

# Quickshell bar
layerrule = blur, quickshell
layerrule = ignorezero, quickshell
layerrule = animation slide, quickshell

# Rofi / Walker launcher
layerrule = blur, rofi
layerrule = ignorezero, rofi
layerrule = blur, launcher
layerrule = ignorezero, launcher

# Notification daemon
layerrule = blur, notifications
layerrule = ignorezero, notifications
